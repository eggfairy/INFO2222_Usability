<head>
  <script src="https://kit.fontawesome.com/712702fa6e.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="css/sidebar.css">
  <link rel="stylesheet" href="css/chat.css">
  </head>
  
  <script>
    function dynamic_search() {
  
    var input, filter, ul, li, la, i, txtValue;
    input = document.getElementById("Input");
    filter = input.value.toUpperCase();
    ul = document.getElementById("friend-list");
    li = ul.getElementsByTagName("li");
  
  
    for (i = 0; i < li.length; i++) { 
      la = li[i].getElementsByTagName("div")[0]; // content in label
      txtValue = la.textContent || la.innerText; 
      if (txtValue.toUpperCase().indexOf(filter) > -1) {
        li[i].style.display = "";
      } else {
        li[i].style.display = "none";
      }
    }
  }
  </script>
  
  <!-- The sidebar -->
  <div class="sidebar">
  
    <a href="/sidebar_setting?uid=${uid}&username=${username}"><img src="/img/user_icon/${uid}.png" class="image" style="width:60px;height:60px;">
      <a href="/default_sidebar?uid=${uid}&username=${username}"><i class="fa-solid fa-comment"></i></a>
      <a href="/sidebar_contact?uid=${uid}&username=${username}"><i class="far fa-address-book"></i></a>
      <a href="/sidebar_forum?uid=${uid}&username=${username}"><i class="fa-regular fa-comments"></i></a>
      <a href="/sidebar_setting?uid=${uid}&username=${username}"><i class="fas fa-cog"></i></a>
      <a href="/login?uid=${uid}&username=${username}"><i class="fa-sharp fa-solid fa-right-from-bracket"></i></a>
  </div>
  
  <div class="search">
    <a href="/add_group_page?uid=${uid}&username=${username}"><i class="fa-solid fa-square-plus"></i></a>
    <input type="text" placeholder="Search..." id="Input" onkeyup="dynamic_search()">
  </div>
  
  <ul id='friend-list'>
    ${output}
  </ul>
  
  
  <div class="main">
      <!-- Main container  -->
          <div class="container">
      <!--  Message header section starts    -->
      <div class="msg-header">
        <div class="container1">
  
            <img src="/img/user_icon/${target_id}.png" class="msgimg">
            <a href="/chat_setting?uid=${uid}&username=${username}&target_id=${target_id}&target_name=${target_name}"><i class="fa-solid fa-ellipsis fa-lg" style="float: right;margin-top: 30; left: 990; position: absolute; display: block; color: black;"></i></a>
            <div class="active">
                <p>${target_name}</p>
            </div>
        </div>
    </div>
      <!-- Message header section ends -->
      
      <!-- Chat inbox section starts -->
               
          <div class="chat-page">
                  <div class="msg-inbox">
                      <div class="chats">
                           <div class="msg-page">
      <!-- Contains the incoming and outgoing messages -->
            ${msgs}
  
            
        <!-- <div class="received-chats">
          <div class="received-chats-img">
              <img src="./../user_icon/icon2.png">
          </div>
          <p>
            <video controls>
              <source src="./../static/video/rickroll.mp4" type="video/mp4">
              <source src="./../static/video/rickroll.ogg" type="video/ogg">
            </video>
          </p>
      </div> -->
  
      <!-- <div class="outgoing-chats">
        <div class="outgoing-chats-img">
            <img src="img/user_icon/icon1.png">
        </div>
        <p>
          <video controls>
            <source src="video/rickroll.mp4" type="video/mp4">
            <source src="video/rickroll.ogg" type="video/ogg">
          </video>
        </p>
        </div>
   -->
          
            <!-- End of incoming and outgoing messages -->
                      
      <!--  Message bottom section starts -->
      
      <div class="msg-bottom">

        <form action="/sendimg?uid=${uid}&username=${username}&target_id=${target_id}&target_name=${target_name}" method="post" enctype="multipart/form-data" style="display: inline-block;">
        <div class="image-upload">
          <label for="img-input">
            <i class="fa-regular fa-image fa-2xl"></i>
          </label>
          <input id="img-input" type="file" accept="image/*" name="sendimage" onchange="this.form.submit()"/>
      </div>
        </form>
  
      <form action="/sendvideo?uid=${uid}&username=${username}&target_id=${target_id}&target_name=${target_name}" method="post" enctype="multipart/form-data" style="display: inline-block;">
        <div class="image-upload">
          <label for="video-input">
            <i class="fa-solid fa-video fa-2xl"></i>
          </label>
          <input id="video-input" type="file" accept="video/*" name="sendvideo" onchange="this.form.submit()"/>
      </div>
      </form>

        <div class="input-group">
          <form action="/sidebar_chat?uid=${uid}&username=${username}&target_id=${target_id}&target_name=${target_name}" method="post" id="FORM">
            <input name="msg" type="text" class="form-control" placeholder="Write message..." id="InputField">
            <div class="input-group-append ">
              <span class="input-group-text send-icon"><i class="fa-solid fa-paper-plane" style="position: absolute; float: right; left: 645; top: -20;"></i></span>
            </div>
          </form>
        </div>
      
    </div> 
 
                      
      <!-- Message bottom section ends. -->
  </div>